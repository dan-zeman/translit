#!/usr/bin/env perl
# Převede text na morseovku a pak na jedničky a nuly podle Pavlova vzoru.
# Copyright © 2012 Dan Zeman <zeman@ufal.mff.cuni.cz>
# Licence: GNU GPL

use utf8;
use open ':utf8';
binmode(STDIN, ':utf8');
binmode(STDOUT, ':utf8');
binmode(STDERR, ':utf8');

my %morse =
(
    'a' => '.-',
    'b' => '-...',
    'c' => '-.-.',
    'd' => '-..',
    'e' => '.',
    'f' => '..-.',
    'g' => '--.',
    'h' => '....',
    'i' => '..',
    'j' => '.---',
    'k' => '-.-',
    'l' => '.-..',
    'm' => '--',
    'n' => '-.',
    'o' => '---',
    'p' => '.--.',
    'q' => '--.-',
    'r' => '.-.',
    's' => '...',
    't' => '-',
    'u' => '..-',
    'v' => '...-',
    'w' => '.--',
    'x' => '-..-',
    'y' => '-.--',
    'z' => '--..',
    '1' => '.----',
    '2' => '..---',
    '3' => '...--',
    '4' => '....-',
    '5' => '.....',
    '6' => '-....',
    '7' => '--...',
    '8' => '---..',
    '9' => '----.',
    '0' => '-----',
    '?' => '..--..',
    ',' => '--..--',
    '!' => '--...-',
    '.' => '.-.-.-',
    ';' => '-.-.-.',
    '/' => '-..-.',
    '=' => '-...-',
    '-' => '-....-',
    '(' => '-.--.',
    ')' => '-.--.-',
    '"' => '.-..-.',
    ':' => '---...',
    '_' => '..--.-',
    '@' => '.--.-.',
);

while(<>)
{
    s/\r?\n$//;
    s/\s+/ /g;
    my $x = lc($_);
    $x =~ tr/áčďéěíňóřšťúůýž/acdeeinorstuuyz/;
    my $m = join('|', grep {$_ ne ''} (map {exists($morse{$_}) ? $morse{$_} : ''} (split(//, $x))));
    my $b = $m; $b =~ tr/-.|/10./;
    print("$b\n");
}
